//#pragma save_binary

#include <mudlib.h> 
#define ZOMBIE  "/d/monk/monster/zombie1.c"

inherit DAEMON;

string *ditung = ({
"三海之内，是大地狱，其数百千，各各差别。所谓大者，具有十八。\n"
"次有五百，苦毒无量。次有千百，亦无量苦。\n ",

"尔时百千万亿不可思、不可议、不可量、不可说无量阿僧□世界，所有地狱\n"
"处，分身地藏菩萨，俱来集在忉利天宫。以如来神力故，各以方面，与诸解\n"
"脱，从业道出者，亦各有千万亿那由他数，共持香华，来供养佛。\n",

"彼诸同来等辈，皆因地藏菩萨教化，永不退转於阿耨多罗三藐三菩提。\n"
"是诸众等，久远劫来，流浪生死，六道受苦，暂无休息。以地藏菩萨广\n"
"大慈悲，深誓愿故，各获果证。既至忉利，心怀踊跃，瞻仰如来，目不暂舍。\n",

"汝观吾累劫勤苦度脱如是等，难化刚强罪苦众生。其有未调伏者，随业报应。\n"
"若堕恶趣，受大苦时，汝当忆念吾在忉利天殷□付嘱，令娑婆世界至弥勒出世\n"
"已来众生，悉使解脱，永离诸苦，遇佛受记。』\n",

"千万世界，乃及国土，或有地狱、或无地狱；或有女人、或无女人；\n"
"或有佛法、或无佛法，乃至声闻辟支佛，亦复如是，非但地狱罪报一等。\n",

"地藏菩白言：『圣母，诸有地狱在大铁围山之内，其大地狱有一十八所\n"
"名号各别，独有一狱，名曰无间，其狱周匝万八千里，狱墙高一千里，\n"
"悉是铁围，上火彻下，下火彻上。铁蛇铁狗，吐火驰逐狱墙之上，东西而走。\n",

"狱中有床，遍满万里。一人受罪，自见其身遍卧满床。千万人受罪，亦\n"
"各自见身满床上。众业所感获报如是。又诸罪人，备受众苦。百千夜叉\n"
"及以恶鬼，口牙如剑，眼如电光，手复铜爪，拖拽罪人。复有夜叉执大\n"
"铁戟，中罪人身，或中口鼻，或中腹背。复有铁蛇绞罪人颈。\n",

"此界坏时，转寄他方；他方坏时，辗转相寄。此界成後，还复而来。无间\n"
"罪报，其事如是。\n",

"又五事业感，故称无间。何等为五？\n"
"    一者、日夜受罪，以至劫数，无时间绝，故称无间。\n"
"    二者、一人亦满，多人亦满，故称无间。\n"
"    三者、罪器叉棒，鹰蛇狼犬，碓磨锯凿，锉砟镬汤，铁网铁绳，铁驴铁\n"
"          马，生革络首，热铁浇身，饥吞铁丸，渴饮铁汁，从年竟劫，数\n"
"          那由他，苦楚相连，更无间断，故称无间。\n"
"    四者、不问男子女人，羌胡夷狄，老幼贵贱，或龙或神，或天或鬼，罪\n"
"          行业感，悉同受之，故称无间。\n"
"    五者、若堕此狱，从初入时，至百千劫，一日一夜，万死万生，求一念\n"
"          间暂住不得，除非业尽，方得受生，以此连绵，故称无间。』\n",

"尔时地藏菩萨摩诃萨白佛言：『世尊，我承佛如来威神利故，遍百千万亿世\n"
"界，分是身形，救拔一切业报众生。若非如来大慈力故，即不能作如是变化\n"
"。我今又蒙佛付嘱，至阿逸多成佛以来，六道众生，遣令度脱。唯然世尊，\n"
"愿不有虑。』\n",

"尔时佛告地藏菩萨：『一切众生未解脱者，性识无定，恶习结业，善习结\n"
"果。为善为恶，逐境而生。转轮五道，暂无休息，动经尘劫，迷祸障难。\n"
"如鱼游网。将是长流，脱入暂出，又复遭网。以是等辈，吾当忧念。汝既\n"
"毕是往愿，累劫重誓，广度罪辈，吾复何虑。』\n",

"『复於过去无量阿僧□劫，有佛出世，名清净莲华目如来，其佛寿命四十\n"
"劫。像法之中，有一罗汉，福度众生。因次教化，遇一女人，字曰光目，\n"
"设食供养。』\n",

"『发誓愿已，俱问清净莲华目如来而告之曰：「光目，汝大慈愍，善能为\n"
"母发如是大愿。吾观汝母十三岁毕，舍此报已，生为梵志，寿年百岁。过\n"
"是报後，当生无忧国土，寿命不可计劫。後成佛果，广度人天，数如恒河\n"
"沙。」\n",

"佛告定自在王：『尔时罗汉福度光目者，即无尽意菩萨是。光目女者，即\n"
"地藏菩萨是。过去久远劫中，如是慈愍，发恒河沙愿，广度众生。未来世\n"
"中，若有男子女人，不行善者行恶者，乃至不信因果者，邪淫妄语者两舌\n"
"恶口者，毁谤大乘者，如是诸业众生，必堕恶趣。\n",

"佛告四天王：『地藏菩萨久远劫来，迄至於今，度脱众生，犹未毕愿，慈\n"
"愍此世罪苦众生。复观未来无量劫中，因蔓不断，以是之故，又发重愿。\n"
"如是菩萨於娑婆世界，阎浮提中，百千万亿方便，而为教化。四天王，地\n"
"藏菩萨:\n"
"        若遇杀生者，            说宿殃短命报。\n"
"        若遇窃盗者，            说贫穷苦楚报。\n"
"        若遇邪淫者，            说雀鸽鸳鸯报。\n"
"        若遇恶口者，            说眷属斗诤报。\n"
"        若遇毁谤者，            说无舌疮口报。\n"
"        若遇□恚者，            说丑陋聋残报。\n"
"        若遇悭吝者，            说所求违愿报。\n"
"        若遇饮食无度者，        说饥渴咽病报。\n"
"        若遇畋猎恣情者，        说惊狂丧命报。\n"
"        若遇悖逆父母者，        说天地灾杀报。\n"
"        若遇烧山林木者，        说狂迷取死报。\n"
"        若遇前後父母恶毒者，    说返生鞭挞现受报。\n"
"        若遇网补生雏者，        说骨肉分离报。\n"
"        若遇毁谤三宝者，        说盲聋□哑报。\n"
"        若遇轻法慢教者，        说永处恶道报。\n"
"        若遇破用常住者，        说亿劫轮回地狱报。\n"
"        若遇污梵诬僧者，        说永在畜牲道。\n"
"        若遇汤火斩斫伤者，      说轮回递偿报。\n"
"        若遇破戒犯斋者，        说禽兽饥恶报。\n"
"        若遇非理毁用者，        说所求阙绝报。\n"
"        若遇吾我贡高者，        说卑使下贱报。\n"
"        若遇两舌斗乱者，        说无舌百舌报。\n"
"        若遇邪见者，            说边地受生报。\n",

"『如是等阎浮提众生，身口意业，恶息结果，百千报应，今粗略说。如\n"
"是等阎浮提众生业感差别，地藏菩萨百千方便而教化之。是诸众生，先\n"
"受如是等报，後堕地狱，动经劫数，无有出期。是故汝等护人护国，无\n"
"令是诸众业迷惑众生。』\n",

"    南无常住十方佛\n"
"    南无常住十方佛\n"
"    南无常住十方佛\n",

"        有大地狱，号极无间，    又有地狱，名大阿鼻，\n"
"        复有地狱，名曰四角，    复有地狱，名曰飞刀，\n"
"        复有地狱，名曰火箭，    复有地狱，名曰夹山，\n"
"        复有地狱，名曰通枪，    复有地狱，名曰铁车，\n"
"        复有地狱，名曰铁床，    复有地狱，名曰铁牛，\n"
"        复有地狱，名曰铁衣，    复有地狱，名曰千刃，\n"
"        复有地狱，名曰铁驴，    复有地狱，名曰烊铜，\n"
"        复有地狱，名曰抱柱，    复有地狱，名曰流火，\n"
"        复有地狱，名曰耕舌，    复有地狱，名曰锉首，\n"
"        复有地狱，名曰烧脚，    复有地狱，名曰□眼，\n"
"        复有地狱，名曰铁丸，    复有地狱，名曰诤论，\n"
"        复有地狱，名曰铁□，    复有地狱，名曰多□。\n",

"        叫唤地狱，      拔舌地狱，      粪尿地狱，\n"
"        铜锁地狱，      火象地狱，      火狗地狱，\n"
"        火马地狱，      火牛地狱，      火山地狱，\n"
"        火石地狱，      火床地狱，      火梁地狱，\n"
"        火鹰地狱，      锯牙地狱，      剥皮地狱，\n"
"        饮血地狱，      烧手地狱，      烧脚地狱，\n"
"        倒刺地狱，      火屋地狱，      铁屋地狱，\n"
"        火狼地狱，      如是等地狱。\n",

"地藏菩萨告普贤菩萨言：『仁者，此者皆是南阎浮提行恶众生，业感如\n"
"是。业力甚大，能敌须弥，能深巨海，能障圣道。是故众生莫轻小恶，\n"
"以为无罪，死後有报，纤毫受之。父子至亲，歧路各别，纵然相逢，无\n"
"肯代受。我今承佛威力，略说地狱罪报之事，唯愿仁者暂听是言。』\n",

"        或有地狱，取罪人心，夜叉食之。\n"
"        或有地狱，镬汤盛沸，煮罪人身。\n"
"        或有地狱，赤烧铜柱，使罪人抱。\n"
"        或有地狱，使诸火烧，趁及罪人。\n"
"        或有地狱，一向寒冰。\n"
"        或有地狱，无限粪尿。\n"
"        或有地狱，纯飞戢□。\n"
"        或有地狱，多钻火枪。\n"
"        或有地狱，唯撞胸背。\n"
"        或有地狱，但烧手足。\n"
"        或有地狱，盘绞铁蛇。\n"
"        或有地狱，驱逐铁狗。\n",

"仁者，如是等报，各各狱中，有百千种业道之器，无非是铜是铁，是石\n"
"是火，此四种物，众业行感。若广说地狱罪报等事，一一狱中更有百千\n"
"种苦楚，何况多狱。我今承佛威神及仁者问，略说如是。若广解说，穷\n"
"劫不尽。\n" });

int help();

int cmd_sac(string str)
{
	string text, name;
	int skill, exp, level, n;
	object targ, env, me, zombie;
	
	if( str ) return help();
	me = this_player();
	env = environment(me);
	if( !env || !targ = present("corpse", env) )
		return notify_fail("这里没有任何□体啊! 你要超度谁啊!\n");
	if(userp(targ)) return notify_fail("这东西还活著, 不能超度!\n");
	skill = (int)this_player()->query_skill("recitation");
	if( !skill ) return notify_fail("你没有学过诵经，你不懂如何超渡死者。\n");

	if( (skill/2 + 50) > random( 111+skill/5 ) ) {
		text = ditung[random(sizeof(ditung))];
		tell_object( me, 
			"你双目微闭，翻开手中的地藏经喃喃的念著....\n\n"+set_color(text, "HIY", me)+
			"\n"+targ->query("short")+"中飘起一股白烟，它微笑著向你点个头而後"+
			"飞向西方极乐世界。\n" );
		tell_room( env, 
			me->query("c_name")+"双目微闭，翻开手中的地藏经喃喃的念著..\n\n"+
			set_color(text, "HIY", me)+"\n"+targ->query("short")+
			"中飘起一股白烟，它微笑著向你点个头而後飞向西方极乐世界。\n" , me );
		exp = 5 + random(11);
		me->gain_experience(exp);
		write("你由於超度成功\获得了 "+exp+" 个经验点数 \n");
		targ->remove();
	} else if( (int)me->query_level() < 8 || random(8) < 4 ) {
		tell_room( environment(me), 
			set_color(targ->query("short")+"爬起来向"+me->query("c_name")+"大骂说\n"+
			"「让你这种连地藏经都不熟的和尚超渡真倒楣啊! 我真是死不瞑目! 」\n\n"+
			targ->query("short")+"中飘起一道亡魂，它很不爽的飘向荒郊野外，成"
			"了孤魂野鬼。\n", "HIM", me) );
		targ->remove();
	} else {
		tell_room( environment(me), 
			set_color(targ->query("short")+"爬起来向"+me->query("c_name")+"说\n"
			"『 来吧! 你这个乱超渡死人的臭和尚，跟我到地狱去吧! 嘿嘿嘿.... 』\n\n"+
			targ->query("short")+"突然爬了起来，它伸直双手跳向你....\n"
			"哇! 是僵□啊!\n", "HIG", me) ); 


	switch( n = random(3) ) {
		case 0: name = "zombie3";		break;
		case 1: name = "zombie2";		break;
		case 2: name = "zombie1";		break;
	}
		zombie = new( "/d/monk/monster/" + name );
		zombie->set_zombie( targ );
		zombie->move( env );
		zombie->kill_ob(me);
		targ->remove();
	}
	return 1;
}

int help()
{
		write( @C_HELP
指令格式: sac 

这个指令让你用来超度亡魂... 不需要任何参数!  

C_HELP
		);

    return 1;
}

#include "oldcat.h"

inherit ROOM;

int be_searched;
void create()
{
	::create();
	set_short("空地");
	set_long( 
@LONG_DESCRIPTION
这片空地只有长了一些杂草，大部份是一些大小不一的石头，你发现这里的石头似
乎和别地方好像有点差别，颜色只有红色的、黑色的，像是被火烧过的样子，地面的土
壤和你所知的火山灰所形成的土相类似，你感觉这里有点热。
LONG_DESCRIPTION
	);
set( "exits", ([
     "northwest" : ONEW"wild10",
     "northeast" : ONEW"wild16" ]) );
set("item_desc",([
    "moss":"@@look_moss",
    ]) );
set("search_desc",([
    "here":"@@to_search_here",
    "moss":"@@to_search_moss"
    ]) );
set_outside("eastland");
reset();
}

string look_moss()
{
  if (!this_player()->query_temp("r/check"))
    return "你想看什麽 ?\n";
  return "一片暗红色的苔藓，苔藓下似乎闪著亮光。\n";
}

string to_search_here()
{
  string str;
  str="当你搜索这地方的时候,你发现有片苔藓(moss)底下闪闪发光。\n";
  this_player()->set_temp("r/check",1);
  return str;
}

int to_search_moss()
{
    object ob1;

    if (!this_player()->query_temp("r/check"))
       return 0;
    if (be_searched!=0)
    { write(
        "你没有找到任何东西。\n");
      return 1;
    };
    tell_room(this_object(),
         "你翻开苔藓，发现了一个红色巧克力\n"
         );
    this_player()->delete_temp("r/check");
    be_searched=1;
    ob1=new(OOBJ"r_chocolate");
    ob1->move(this_object());
    return 1;
}

void reset()
{
  ::reset();
  be_searched=0;
}
